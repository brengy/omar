<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Game</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Create image objects
        const backgroundImage = new Image();
        const characterImage = new Image();
        const coinImage = new Image();

        // Set image sources
        backgroundImage.src = 'bbbh6.jpg'; // Ensure this path is correct
        characterImage.src = 'https://raw.githubusercontent.com/brengy/car/main/WhatsApp_Image_2024-02-29_at_10.14.55_PM-removebg-preview.png'; // Ensure this URL is correct
        coinImage.src = 'golden_coin.png'; // Replace with your coin image URL or local path

        const character = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            width: 50,
            height: 50,
            vx: 0,
            vy: 0,
            speed: 5
        };

        const coins = [];
        for (let i = 0; i < 10; i++) {
            coins.push({
                x: Math.random() * (canvas.width - 30),
                y: Math.random() * (canvas.height - 30),
                width: 30,
                height: 30
            });
        }

        function update() {
            // Update character position based on velocity
            character.x += character.vx;
            character.y += character.vy;

            // Boundary check to keep the character within canvas bounds
            if (character.x < 0) character.x = 0;
            if (character.x + character.width > canvas.width) character.x = canvas.width - character.width;
            if (character.y < 0) character.y = 0;
            if (character.y + character.height > canvas.height) character.y = canvas.height - character.height;

            // Check for coin collection
            coins.forEach((coin, index) => {
                if (
                    character.x < coin.x + coin.width &&
                    character.x + character.width > coin.x &&
                    character.y < coin.y + coin.height &&
                    character.y + character.height > coin.y
                ) {
                    // Coin collected
                    coins.splice(index, 1);
                }
            });

            // Clear the canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw background
            ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);

            // Draw coins
            coins.forEach(coin => {
                ctx.drawImage(coinImage, coin.x - character.x + canvas.width / 2, coin.y - character.y + canvas.height / 2, coin.width, coin.height);
            });

            // Draw character
            ctx.drawImage(characterImage, canvas.width / 2 - character.width / 2, canvas.height / 2 - character.height / 2, character.width, character.height);

            requestAnimationFrame(update);
        }

        function handleInput(e) {
            switch(e.key) {
                case 'ArrowUp':
                    character.vy = -character.speed;
                    break;
                case 'ArrowDown':
                    character.vy = character.speed;
                    break;
                case 'ArrowLeft':
                    character.vx = -character.speed;
                    break;
                case 'ArrowRight':
                    character.vx = character.speed;
                    break;
            }
        }

        function handleKeyUp(e) {
            switch(e.key) {
                case 'ArrowUp':
                case 'ArrowDown':
                    character.vy = 0;
                    break;
                case 'ArrowLeft':
                case 'ArrowRight':
                    character.vx = 0;
                    break;
            }
        }

        function startGame() {
            console.log('All images loaded. Starting game.');
            update();
        }

        backgroundImage.onload = () => {
            console.log('Background image loaded');
            characterImage.onload = () => {
                console.log('Character image loaded');
                coinImage.onload = () => {
                    console.log('Coin image loaded');
                    startGame();
                };
            };
        };

        document.addEventListener('keydown', handleInput);
        document.addEventListener('keyup', handleKeyUp);
    </script>
</body>
</html>
